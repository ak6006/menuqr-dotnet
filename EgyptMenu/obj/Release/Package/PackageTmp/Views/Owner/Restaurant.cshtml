@model EgyptMenu.Models.restorant
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="76x76" href="~/Content/images/icons/apple-icon.png">
    <link rel="icon" type="image/png" href="~/Content/images/icons/favicon.png">
    <meta name="csrf-token" content="YSV0woDIt60OSgN2ES1zL7m8AMaFQLylTDeDp8if">
    <meta property="og:image" content="/default/logo_qrzebra.png">
    <title>QR Menu Maker</title>

    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <script src="https://kit.fontawesome.com/459f34aff4.js" crossorigin="anonymous"></script>

    <!-- Font Awesome Icons -->
    <link href="~/Content/font-awesome.css" rel="stylesheet" />
    <link href="~/Content/nucleo-svg.css" rel="stylesheet" />
    <link href="~/Content/nucleo-icons.css" rel="stylesheet" />

    <!-- CSS Files -->
    <link href="~/Content/argon-design-system.min.css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link href="~/Content/custom.css" rel="stylesheet" />

    <!-- Select2 -->
    <link href="~/Content/select2.min.css" rel="stylesheet" />



    <!-- Global site tag (gtag.js) - Google Analytics -->
    <!-- Chrome for Android theme color -->
    <meta name="theme-color" content="#000000">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="QR Menu Maker">
    <link rel="icon" sizes="256x256" href="android-chrome-256x256.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="QR Menu Maker">
    <link rel="apple-touch-icon" href="android-chrome-256x256.png">


    <link href="/images/icons/splash-640x1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="/images/icons/splash-750x1334.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="/images/icons/splash-1242x2208.png" media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image" />
    <link href="/images/icons/splash-1125x2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image" />
    <link href="/images/icons/splash-828x1792.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="/images/icons/splash-1242x2688.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image" />
    <link href="/images/icons/splash-1536x2048.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="/images/icons/splash-1668x2224.png" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="/images/icons/splash-1668x2388.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
    <link href="/images/icons/splash-2048x2732.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />

    <!-- Tile for Win8 -->
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="android-chrome-256x256.png">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color"  content="#ffffff">

    <!-- Custom CSS defined by admin -->
    <link href="~/Content/front.css" rel="stylesheet" />

</head>

<body class="">
    <form id="logout-form" action="http://localhost/logout" method="POST" style="display: none;">
        <input type="hidden" name="_token" value="YSV0woDIt60OSgN2ES1zL7m8AMaFQLylTDeDp8if">
    </form>



    <!-- Navbar -->
    <nav id="navbar-main" class="navbar navbar-light navbar-expand-lg fixed-top">


        <div class="container-fluid">
            <a class="navbar-brand mr-lg-5" href="/">
                <img src="~/Content/images/logo_qrzebra.png">
            </a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse" id="navbar_global">
                <div class="navbar-collapse-header">
                    <div class="row">
                        <div class="col-6 collapse-brand">
                            <a href="#">
                                <img src="/default/logo_qrzebra.png">
                            </a>
                        </div>
                        <div class="col-6 collapse-close">
                            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation">
                                <span></span>
                                <span></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </nav>

    <!-- End Navbar -->
    <div class="wrapper">
       
        <section class="section-profile-cover section-shaped grayscale-05 d-none d-md-none d-lg-block d-lx-block">
            <!-- Circles background -->
            <img class="bg-image" loading="lazy" src="~/Content/images/L_C_@Model.id@Model.cover" style="width: 100%;">
            <!-- SVG separator -->
            <div class="separator separator-bottom separator-skew">
                <svg x="0" y="0" viewBox="0 0 2560 100" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <polygon class="fill-white" points="2560 0 2560 100 0 100"></polygon>
                </svg>
            </div>
        </section>

        <section class="section pt-lg-0 mb--5 mt--9 d-none d-md-none d-lg-block d-lx-block">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="title white" style="border-bottom: 1px solid #f2f2f2;">
                            <h1 class="display-3 text-white" data-toggle="modal" data-target="#modal-restaurant-info" style="cursor: pointer;">@Model.name</h1>
                            <p class="display-4" style="margin-top: 120px">@Model.description</p>
                            <p><i class="far fa-clock"></i>   <span>5:00 AM</span> - <span>11:00 PM</span> |   <i class="fas fa-map-marker-alt"></i> <a target="_blank" href="https://www.google.com/maps/search/?api=1&query=6+Yukon+Drive+Raeford%2C+NC+28376">@Model.address</a>  |  <i class="fas fa-mobile-alt"></i> <a href="tel:(530) 62 5-9694">@Model.phone </a></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="section section-lg d-md-block d-lg-none d-lx-none" style="padding-bottom: 0px">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="title">
                            <h1 class="display-3 text" data-toggle="modal" data-target="#modal-restaurant-info" style="cursor: pointer;">@Model.name</h1>
                            <p class="display-4 text">@Model.description</p>
                            <p>Today working hours: <span><strong>5:00 AM</strong></span> - <span><strong>11:00 PM</strong></span></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section pt-lg-0" id="restaurant-content" style="padding-top: 0px">
            <input type="hidden" id="rid" value="1" />
            <div class="container container-restorant">

                <nav class="tabbable sticky" style="top: 64px;">
                    <ul class="nav nav-pills bg-white mb-2">
                        <li class="nav-item nav-item-category ">
                            <a class="nav-link  mb-sm-3 mb-md-0 active btn" data-toggle="tab" role="tab" onclick="showonly('all')">All categories</a>
                        </li>
                        @foreach (var item in Model.categories)
                        {
                            <li class="nav-item nav-item-category" id="cat_@item.name">
                                <a class="nav-link mb-sm-3 mb-md-0 btn" data-toggle="tab" role="tab" id="nav_@item.name" onclick="showonly('@item.name')">@item.name</a>
                            </li>

                        }
                    </ul>
                </nav>

                @foreach (var item in Model.categories)
                {
                    <div class="catigoryDiv" id="@item.name">
                        <div id="@item.name" class="@item.name">
                            <h1>@item.name</h1><br />
                        </div>
                        <div class="row @item.name">
                            <input type="hidden" id="HiddenItemId" />

                            @foreach (var item1 in item.items)
                            {
                                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6">
                                    <div class="strip">
                                        <figure>
                                            <a data-toggle="modal" data-target="#@item1.name.Replace(" ","")" >
                                                <img src="~/Content/images/@item1.image" loading="lazy" class="tt img-fluid lazy" alt="">
                                            </a>
                                        </figure>
                                        <span class="res_title">
                                            <b>
                                                <a  data-toggle="modal" data-target="#@item1.name.Replace(" ","")" >
                                                    @item1.name
                                                </a>
                                            </b>
                                        </span>
                                        <br />
                                        <span class="res_description">@item1.description</span><br />
                                        <span class="res_mimimum">@item1.price EGP</span>
                                    </div>
                                </div>


                                <div class="modal fade" id="@item1.name.Replace(" ","")" z-index="9999" tabindex="-1" role="dialog" aria-labelledby="modal-form" aria-hidden="true">
                                    <div class="modal-dialog modal-lg modal-dialog-centered modal-" role="document" id="modalDialogItem">

                                        <div class="modal-content">

                                            <div class="modal-header">
                                                <h5 id="modalTitle" class="modal-title">@item1.name</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">×</span>
                                                </button>
                                            </div>


                                            <div class="modal-body p-0">
                                                <div class="card bg-secondary shadow border-0">
                                                    <div class="card-body px-lg-5 py-lg-5">
                                                        <div class="row">
                                                            <div class="col-sm col-md col-lg text-center" id="modalImgPart">
                                                                <img id="modalImg" src="~/Content/images/@item1.image" width="295px" height="200px">
                                                            </div>
                                                            <div class="col-sm col-md col-lg col-lg" id="modalItemDetailsPart">
                                                                <input id="modalID" type="hidden">
                                                                <span id="modalPrice" class="new-price">@item1.price EGP</span>
                                                                <p id="modalDescription">@item1.description</p>
        
                                                                <div id="exrtas-area" style="">
                                                                    <br>
                                                                    <label class="form-control-label" for="quantity">Extras</label>

                                                                    <div id="exrtas-area-inside">
                                                                        <div class=" mb-3">
                                                                            @foreach (var item2 in item1.extras)
                                                                            {
                                                                                <label>@item2.name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+@item2.price EGP</label><br />
                                                                            }
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div id="exrtas-area" style="">
                                                                    <br>
                                                                    <label class="form-control-label" for="quantity">Options</label>

                                                                    <div id="exrtas-area-inside">
                                                                        <div class=" mb-3">
                                                                            @foreach (var item2 in item1.options)
                                                                            {
                                                                                <div class="col-sm col-md col-lg col-lg" id="modalItemDetailsPart">
                                                                                    <div id="variants-area-3">
                                                                                        <br>
                                                                                        <label class="form-control-label"><b>@item2.name<b></b></b></label>
                                                                                        <div>
                                                                                            <div id="variants-area-inside-3" class="btn-group btn-group-toggle" data-toggle="buttons">
                                                                                                <b><b> </b></b>
                                                                                             </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    @foreach (var item3 in item2.options_details)
                                                                                    {
                                                                                        <label style="opacity: 1" class="btn btn-outline-primary ">@item3.option_name</label>
                                                                                    }
                                                                                </div>
                                                                            }
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }
            </div>
    </div>
    <i id="scrollTopBtn" onclick="topFunction()" class="fa fa-arrow-up btn-danger"></i>
    </section>
    <div class="wrapper">
        <div id="cartSideNav" class="sidenav-cart sidenav-cart-close">
            <div class="offcanvas-menu-inner">
                <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                <div class="minicart-content">
                    <div class="minicart-heading">
                        <h4>Shopping Cart</h4>
                    </div>
                    <div class="searchable-container">
                        <div id="cartList">
                            <div v-for="item in items" class="items col-xs-12 col-sm-12 col-md-12 col-lg-12 clearfix">
                                <div class="info-block block-info clearfix" v-cloak>
                                    <div class="square-box pull-left">
                                        <img :src="item.attributes.image" class="productImage" width="100" height="105" alt="">
                                    </div>
                                    <h6 class="product-item_title">{{ item.name }}</h6>
                                    <p class="product-item_quantity">{{ item.quantity }} x {{ item.attributes.friendly_price }}</p>
                                    <ul class="pagination">
                                        <li class="page-item">
                                            <button v-on:click="decQuantity(item.id)" :value="item.id" class="page-link" tabindex="-1">
                                                <i class="fa fa-minus"></i>
                                            </button>
                                        </li>
                                        <li class="page-item">
                                            <button v-on:click="incQuantity(item.id)" :value="item.id" class="page-link">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                        </li>
                                        <li class="page-item">
                                            <button v-on:click="remove(item.id)" :value="item.id" class="page-link">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div id="totalPrices" v-cloak>
                            <div class="card card-stats mb-4 mb-xl-0">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <span v-if="totalPrice==0">Cart is empty!</span>
                                            <span v-if="totalPrice"><strong>Subtotal:</strong></span>
                                            <span v-if="totalPrice" class="ammount"><strong>{{ totalPriceFormat }}</strong></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div v-if="totalPrice" v-cloak>
                                <a href="/cart-checkout" class="btn btn-primary text-white">Checkout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <div class="row align-items-center justify-content-md-between">
                    <div class="col-md-6">
                        <div class="copyright">
                            &copy; 2020 <a href="" target="_blank">QR Menu Maker</a>.
                        </div>
                    </div>
                    <div class="col-md-6">
                        <ul id="footer-pages" class="nav nav-footer justify-content-end">
                            <li v-for="page in pages" class="nav-item" v-cloak>
                                <a :href="'/pages/' + page.id" class="nav-link">{{ page.title }}</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    <script>
        function getId() {
            return document.getElementById("HiddenItemId").value;
        }

        function setCurrentItem(id) {
            document.getElementById("HiddenItemId").value = id;
            $("#GetModalData").load("@Url.Action("ItemModal", "Owner")", { 'id': document.getElementById("HiddenItemId").value },
                function (response, status, xhr) {
                    if (status == "error") {
                        $("#GetModalData").text = "An error occurred while loading the results.";
                    }
                });
        }
    </script>
    <!--   Core JS Files   -->
    <script src="~/Content/JS/jquery.min.js" type="text/javascript"></script>
    <script src="~/Content/JS/popper.min.js"></script>
    <script src="~/Content/JS/perfect-scrollbar.jquery.min.js"></script>
    <script src="~/Content/JS/bootstrap.min.js"></script>
    <!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
    <script src="~/Content/JS/bootstrap-switch.js"></script>

    <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
    <script src="~/Content/JS/moment.min.js"></script>
    <script src="~/Content/JS/nouislider.min.js"></script>
    <script src="~/Content/JS/datetimepicker.js"></script>
    <script src="~/Content/JS/bootstrap-datepicker.min.js"></script>

    <!-- Control Center for Argon UI Kit: parallax effects, scripts for the example pages etc -->
    <script src="~/Content/JS/argon-design-system.js"></script>

    <!-- Import Vue -->
    <script src="~/Content/JS/vue.js"></script>
    <!-- Import AXIOS --->
    <script src="~/Content/JS/axios.min.js"></script>

    <!-- Add to Cart   -->
    <script>
        var LOCALE = "en";
        var CASHIER_CURRENCY = "eur";
    </script>


    <!-- Cart custom sidemenu -->
    <script src="~/Content/JS/cartSideMenu.js"></script>
    <!-- Notify JS -->
    <script src="~/Content/JS/notify.min.js"></script>

    <!-- SELECT2 -->
    <script src="~/Content/JS/select2.js"></script>
    <script src="~/Content/JS/select2.min.js"></script>

    <!-- Google Map -->
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?libraries=geometry,drawing&key=">
    </script>

    <script>
        "use strict";
        var items = [];
        var currentItem = null;
        var currentItemSelectedPrice = null;
        var lastAdded = null;
        var previouslySelected = [];
        var extrasSelected = [];
        var variantID = null;
        var CASHIER_CURRENCY = "eur";
        var LOCALE = "en";

        /*
        * Price formater
        * param  {Nummber} price
        */
        function formatPrice(price) {
            var formatter = new Intl.NumberFormat(LOCALE, {
                style: 'currency',
                currency: CASHIER_CURRENCY,
            });

            var formated = formatter.format(price);

            return formated;
        }

        /**
         * Load extras for variant
         * param  {Number} variant_id the variant id
         * */
        function loadExtras(variant_id) {
            //alert("Load extras for "+variant_id);
            $.ajaxSetup({
                headers: {
                    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                }
            });

            $.ajax({
                type: 'GET',
                url: '/items/variants/' + variant_id + '/extras',
                success: function (response) {
                    if (response.status) {
                        response.data.forEach(element => {
                            $('#exrtas-area-inside').append('<div class="custom-control custom-checkbox mb-3"><input onclick="recalculatePrice(' + element.item_id + ');" class="custom-control-input" id="' + element.id + '" name="extra"  value="' + element.price + '" type="checkbox"><label class="custom-control-label" for="' + element.id + '">' + element.name + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+' + formatPrice(element.price) + '</label></div>');
                        });
                        $('#exrtas-area').show();

                    }
                }, error: function (response) {
                    //return callback(false, response.responseJSON.errMsg);
                }
            })
        }




        /**
         *
         * Set the selected variant, set price and shows qty area and calls load extras
         * */
        function setSelectedVariant(element) {

            //console.log(formated);
            $('#modalPrice').html(formatPrice(element.price));

            //Set current item price
            currentItemSelectedPrice = element.price;

            //Show QTY
            $('.quantity-area').show();

            //Set variantID
            variantID = element.id;

            //Empty the extras, and call it
            $('#exrtas-area-inside').empty();
            loadExtras(variantID);

        }

        function getTheDataForTheFoundVariable() {
            console.log(previouslySelected);
            var comparableObject = {};
            previouslySelected.forEach(element => {
                comparableObject[element.option_id] = element.name.trim().toLowerCase().replace(/\s/g, "-");
            });
            comparableObject = JSON.stringify(comparableObject)
            currentItem['variants'].forEach(element => {
                if (comparableObject == element.options) {
                    console.log(element.options);
                    setSelectedVariant(element);
                }
            });

        }


        function checkIfVariableExists(forOption, optionValue) {

            var newElement = { "option_id": forOption, "name": optionValue };
            console.log('NEW ELEMNGT');
            console.log(newElement);

            var possibleSelection = JSON.parse(JSON.stringify(previouslySelected));
            possibleSelection.push(newElement);
            console.log(possibleSelection);

            var filteredObjects = [];
            //possibleSelection.forEach(element => {
            currentItem.variants.forEach(theVariant => {
                var theOptions = JSON.parse(theVariant.options);
                var ok = true;
                Object.keys(theOptions).map((key) => {

                    console.log(key + " : " + theOptions[key])
                    possibleSelection.forEach(element => {
                        if (key == element.option_id) {
                            if (theOptions[key] + "" != element.name.trim().toLowerCase().replace(/\s/g, "-") + "") {
                                ok = false;
                            }
                        }
                    });

                })

                if (ok) {
                    idfilteredObjects.push(theVariant);
                    console.log("ok")
                } else {
                    console.log("not ok")
                }

                //comparableObject[element.option_id]=element.name.trim().toLowerCase().replace(/\s/g , "-");
            });

            //});


            return filteredObjects.length > 0;

        }

        function appendOption(name, id) {
            lastAdded = id;
            $('#variants-area-inside').append('<div id="variants-area-' + id + '"><br /><label class="form-control-label"><b>' + name + '<b></label><div><div id="variants-area-inside-' + id + '" class="btn-group btn-group-toggle" data-toggle="buttons"> </div></div>');
        }

        function optionChanged(option_id, name) {

            var newElement = { "option_id": option_id, "name": name };

            //If this option is already in the select, then it means it is old
            var tempObj = [];
            var wasOld = false;
            if (previouslySelected.length > 0) {
                previouslySelected.forEach(element => {
                    if (!wasOld) {
                        extras   variants         if (element.option_id == option_id) {
                            //This is old select, remove any new
                            tempObj.push(newElement);
                            wasOld = true;
                        } else {
                            tempObj.push(element);
                        }
                    } else {
                        //When rest, from the old one, remove the object
                        $("#variants-area-" + element.option_id).remove();
                    }

                });
            }

            if (wasOld) {
                previouslySelected = tempObj;
                //remove also last inserted, and readded it
                $("#variants-area-" + lastAdded).remove();
            } else {
                previouslySelected.push(newElement);
            }
            setVariants();


        }

        function appendOptionValue(name, enabled, option_id) {
            $('#variants-area-inside-' + option_id).append('<label style="opacity: ' + (enabled ? 1 : 0.5) + '" class="btn btn-outline-primary"><input  onchange="optionChanged(' + option_id + ',\'' + name + '\')"  ' + (enabled ? "" : "disabled") + ' type="radio" name="option_' + option_id + '" value="option_' + option_id + "_" + name + '" autocomplete="off" />' + name + '</label>')
        }

        function setVariants() {
            //1. Determine previously selected variants
            // var previouslySelected=[];

            //HIDE QTY
            $('.quantity-area').hide();
            $('#exrtas-area-inside').empty();
            $('#exrtas-area').hide();

            //2. Get the new option to show
            var newOptionToShow = null;
            console.log(currentItem.options[previouslySelected.length]);
            newOptionToShow = currentItem.options[previouslySelected.length];

            if (newOptionToShow != undefined) {
                //2.1 Add the options in the table
                appendOption(newOptionToShow.name, newOptionToShow.id);

                newOptionToShow.options.split(",").forEach(element => {
                    if (checkIfVariableExists(newOptionToShow.id, element)) {
                        //Next variable exists
                        console.log("Exists: " + element);
                        appendOptionValue(element, true, newOptionToShow.id);
                    } else {
                        //Vsaraiable with the next option value doens't exists
                        console.log("Does not exists: " + element);
                        appendOptionValue(element, false, newOptionToShow.id);
                    }


                });
            } else {
                console.log("No more options");
                getTheDataForTheFoundVariable();
            }




            //3. Add the new option options
            //3.1 If new option is null, show the variant price
        }













    </script>
    <script type="text/javascript">
        function getLocation(callback) {
            $.ajaxSetup({
                headers: {
                    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                }
            });

            $.ajax({
                type: 'GET',
                url: '/get/rlocation/' + $('#rid').val(),
                success: function (response) {
                    if (response.status) {
                        return callback(true, response.data)
                    }
                }, error: function (response) {
                    return callback(false, response.responseJSON.errMsg);
                }
            })
        }

        function initializeMap(lat, lng) {
            var map_options = {
                zoom: 13,
                center: new google.maps.LatLng(lat, lng),
                mapTypeId: "terrain",
                scaleControl: true
            }

            map_location = new google.maps.Map(document.getElementById("map3"), map_options);
        }

        function initializeMarker(lat, lng) {
            var markerData = new google.maps.LatLng(lat, lng);
            marker = new google.maps.Marker({
                position: markerData,
                map: map_location,
                icon: start
            });
        }

        var start = "https://cdn1.iconfinder.com/data/icons/Map-Markers-Icons-Demo-PNG/48/Map-Marker-Ball-Pink.png"
        var area = "https://cdn1.iconfinder.com/data/icons/Map-Markers-Icons-Demo-PNG/48/Map-Marker-Ball-Chartreuse.png"
        var map_location = null;
        var map_area = null;
        var marker = null;
        var infoWindow = null;
        var lat = null;
        var lng = null;
        var circle = null;
        var isClosed = false;
        var poly = null;
        var markers = [];
        var markerArea = null;
        var markerIndex = null;
        var path = null;

        var categories = ["salads0", "pizza1", "freshpastaandrisotto2", "lasagna3"];

        window.onload ? window.onload() : null;

        window.onload = function () {
            //var map, infoWindow, marker, lng, lat;

            getLocation(function (isFetched, currPost) {
                if (isFetched) {


                    if (currPost.lat != 0 && currPost.lng != 0) {
                        //initialize map
                        initializeMap(currPost.lat, currPost.lng)

                        //initialize marker
                        initializeMarker(currPost.lat, currPost.lng)

                        //var isClosed = false;
                    }
                }
            });
        }


        var mybutton = document.getElementById("scrollTopBtn");

        window.onscroll = function () { scrollFunction() };
        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                mybutton.style.display = "block";
            } else {
                mybutton.style.display = "none";
            }
        }

        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
            //document.body.scrollTop = 0;
            $("html, body").animate({ scrollTop: 0 }, 600);
            document.documentElement.scrollTop = 0;
        }



        $(".nav-item-category").on('click', function () {
            $.each(categories, function (index, value) {
                $("." + value).show();

                //$("#nav_"+value).removeClass("active");
            });

            var id = $(this).attr("id");
            var category_id = id.substr(id.indexOf("_") + 1, id.length);
            //$("#nav_"+category_id).addClass("active");

            //$("."+category_id).hide();

            $.each(categories, function (index, value) {
                if (value != category_id) {
                    $("." + value).hide();
                }
            });
        });
    </script>
    <script>


            @*$.ajax({
                url: '@Url.Action("ItemModal", "Owner")',
                contentType: 'application/json; charset=utf-8',
                method: "get",
                data: ({ id: this.id }),
                dataType: 'html',
                success: function (result) {
                    $("#GetModalData").load(result);
                },*@
                //document.getElementById("modalTitle").innerHTML = name;
                //document.getElementById("modalPrice").innerHTML = "$ " + price;
                //document.getElementById("modalDescription").innerHTML = description;
                //document.getElementById("modalImg").src = "/Content/images/" + image;
                //for (i = 0; i < extras.length; i++) {
                //    document.getElementById("modalExtra").innerText += extras[i];
                //}

        function showonly(divId) {

            if (divId == "all") {
                var catigoryDivs = document.getElementsByClassName("catigoryDiv");
                for (var i = 0; i < catigoryDivs.length; i++) {
                    catigoryDivs[i].style.display = "block";
                }
            }
            else {
                var catigoryDivs = document.getElementsByClassName("catigoryDiv");
                for (var i = 0; i < catigoryDivs.length; i++) {
                    catigoryDivs[i].style.display = "none";
                }
                document.getElementById(divId).style.display = "block";
            }
        }
    </script>

    <!-- Custom JS defined by admin -->

</body>

</html>
